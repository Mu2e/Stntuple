# -*- mode: tcl -*-
BEGIN_PROLOG
#------------------------------------------------------------------------------
# Stntuple maker sequence
#------------------------------------------------------------------------------
InitStntuple : { 
    module_type       : InitStntuple
    module_name       : InitStntuple
	    
    histFileName      : "{DATASET}.{JOB}.stn"
    splitLevel        : 0
	    
    debugBits         : { 
	# bit0:1  
	# bit1:1 
	# bit51:1
    }
}
	
StntupleMaker : { 
    module_type         : StntupleMaker
    module_name         : StntupleMaker
    processName         : undefined
    
    TimeOffsets         : { inputs : [ "protonTimeMap", "muonTimeMap" ] }    
	    
    strawHitMaker       : makeSH
    caloCrystalHitMaker : CaloCrystalHitsMaker
    caloClusterMaker    : MakeCaloCluster
    trkPatRecDem        : TrkPatRec
    trkExtrapol         : TrkExtrapol
    trkCalMatch         : CaloMatching
    pidDem              : ParticleID

    makeCalData         : 1
    makeStrawData       : 0
    makeTracks          : 1
    makeTracksUem       : 0
    makeTracksDmm       : 0
    makeTracksUmm       : 0
    makeClusters        : 1
    makeGenp            : 1
    makeSimp            : 1
    makeVirtualHits     : 1
	    
    minTActive          : 0.
    debugBits           : { 
	# bit0:1  
	# bit1:1 
	# bit51:1
    }
}
	
FillStntuple : { 
    module_type       : FillStntuple
    module_name       : FillStntuple
    
    debugBits         : { 
	# bit0:1  
	# bit1:1 
	# bit51:1
    }
}

StntupleParticleGun         : {
#------------------------------------------------------------------------------
# for 105 MeV/c electron : E = 105.00130           MeV
# for muon: sqrt(105.*105+105.658*105.658) = 148.9584269653785
# by default, StoppedParticleReactionGun has 'mean' set to +1, 
# which means the Poisson mean of 1 !!! 
#------------------------------------------------------------------------------
    module_type      : StntupleParticleGun
    mean             : -1
    physics          : {
	pdgId            : 13
	spectrumVariable : "totalEnergy"
	spectrumShape    : "flat"
	elow             : 148.953 
	ehi              : 148.963 
    }
    muonStops            : {
#------------------------------------------------------------------------------
# use --fclinput=@muStops:datasets/mustops for grid submission 
# [ "mergedMuonStops/mustops.1025a_1426a_1504a.15318715.root" ] 
#------------------------------------------------------------------------------
	inputFiles            : @local::muStops
	averageNumRecordsToUse: 500000
	treeName              : "stoppedMuonDumper/stops"
	branchName            : "stops"
	verbosityLevel        : 1
    }
}

#------------------------------------------------------------------------------
# 
#------------------------------------------------------------------------------
MuHitDisplay: {
    module_type                  : MuHitDisplay # the class name
    debugBits                    : { }          # need for TAnaModule
    interactiveMode              : 1
	
    generatorModuleLabel         : generate
    g4ModuleLabel                : g4run
    strawHitMakerModuleLabel     : makeSH
    strawHitPosMakerModuleLabel  : MakeStereoHits
    strawHitFlagMakerModuleLabel : FlagStrawHits
    caloClusterModuleLabel       : MakeCaloCluster
    trkExtrapol                  : TrkExtrapol
    trkCalMatch                  : CaloMatching
    trkPatRecModuleLabel         : TrkPatRec
    pidModuleLabel               : ParticleID
	
    # if set to true, all hits will be displayed unconditionally
    # otherwise, display only hits with right flags
    displayBackgroundHits        : true
    useStereoHits                : false

    #      goodHitMask                 : ["EnergySelection","RadiusSelection","TimeSelection"]
    goodHitMask                  : ["EnergySelection", "RadiusSelection"]
    badHitMask                   : ["DeltaRay", "Isolated"]
	
    trackerStepPoints            : tracker
    minHits                      : 5
    clickToAdvance               : true
    printHits                    : false
    timeWindow                   : 100000.
    #      timeWindow           : 50.
}

END_PROLOG
